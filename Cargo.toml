[package]
authors = ["Josh Holmer <jholmer.in@gmail.com>"]
name = "mp4batch"
version = "2.0.0"
edition = "2021"
rust-version = "1.60"

[dependencies]
ansi_term = "0.12"
anyhow = "1.0"
clap = { version = "4.0.8", features = ["derive"] }
dotenvy_macro = "0.15"
itertools = "0.12"
lexical-sort = "0.3"
nom = "7.1.0"
once_cell = "1.14.0"
path-clean = "1.0.1"
size = "0.4"
regex = "1.6.0"
walkdir = "2"
vapoursynth = { version = "0.4.0", features = [
    "vsscript-functions",
    "vapoursynth-api-36",
    "vsscript-api-32",
] }
av-data = "0.4.1"
which = "5.0.0"

[profile.release]
lto = "thin"
codegen-units = 1

[lints.rust]
# Safety lints
bare_trait_objects = "deny"

[lints.clippy]
# Safety lints
as_ptr_cast_mut = "deny"
cast_ptr_alignment = "deny"
large_stack_arrays = "deny"
ptr_as_ptr = "deny"
transmute_ptr_to_ptr = "deny"
# Correctness lints
case_sensitive_file_extension_comparisons = "deny"
copy_iterator = "deny"
expl_impl_clone_on_copy = "deny"
float_cmp = "deny"
manual_instant_elapsed = "deny"
match_same_arms = "deny"
mem_forget = "deny"
path_buf_push_overwrite = "deny"
same_functions_in_if_condition = "deny"
unchecked_duration_subtraction = "deny"
unicode_not_nfc = "deny"
imprecise_flops = "warn"
must_use_candidate = "warn"
suspicious_operation_groupings = "warn"
# Performance lints
cloned_instead_of_copied = "warn"
inefficient_to_string = "warn"
invalid_upcast_comparisons = "warn"
iter_with_drain = "warn"
large_types_passed_by_value = "warn"
linkedlist = "warn"
mutex_integer = "warn"
naive_bytecount = "warn"
needless_bitwise_bool = "warn"
needless_collect = "warn"
needless_pass_by_value = "warn"
no_effect_underscore_binding = "warn"
or_fun_call = "warn"
stable_sort_primitive = "warn"
suboptimal_flops = "warn"
trivial_regex = "warn"
trivially_copy_pass_by_ref = "warn"
unnecessary_join = "warn"
unused_async = "warn"
zero_sized_map_values = "warn"
# Clarity/formatting lints
borrow_as_ptr = "warn"
checked_conversions = "warn"
default_trait_access = "warn"
derive_partial_eq_without_eq = "warn"
explicit_deref_methods = "warn"
filter_map_next = "warn"
flat_map_option = "warn"
fn_params_excessive_bools = "warn"
from_iter_instead_of_collect = "warn"
if_not_else = "warn"
implicit_clone = "warn"
iter_not_returning_iterator = "warn"
iter_on_empty_collections = "warn"
macro_use_imports = "warn"
manual_clamp = "warn"
manual_let_else = "warn"
manual_ok_or = "warn"
manual_string_new = "warn"
map_flatten = "warn"
map_unwrap_or = "warn"
match_bool = "warn"
mut_mut = "warn"
needless_borrow = "warn"
needless_continue = "warn"
option_if_let_else = "warn"
range_minus_one = "warn"
range_plus_one = "warn"
redundant_else = "warn"
ref_binding_to_reference = "warn"
ref_option_ref = "warn"
semicolon_if_nothing_returned = "warn"
trait_duplication_in_bounds = "warn"
type_repetition_in_bounds = "warn"
unnested_or_patterns = "warn"
unused_peekable = "warn"
unused_rounding = "warn"
unused_self = "warn"
used_underscore_binding = "warn"
verbose_bit_mask = "warn"
verbose_file_reads = "warn"
# Documentation lints
doc_link_with_quotes = "warn"
doc_markdown = "warn"
missing_errors_doc = "warn"
missing_panics_doc = "warn"
